webpackJsonp([12],{"+ir/":function(e,s,t){"use strict";Object.defineProperty(s,"__esModule",{value:!0});var a={computed:{},data:function(){return{labelPosition:"right",requestParam:{msg:null},timeDet:0,open:!1,timer:null,btn:{pushmsgDisabled:!1,sh_pushmsgDisabled:!1},user:this.$store.getters["user/getUser"]}},methods:{submit:function(){var e=this,s=this;clearInterval(this.timer),this.btn.pushmsgVisable=!0,this.$api.game.sendSysMsg(this.requestParam).then(function(t){!0===t.data.success?e.$message({showClose:!0,message:"发布成功!",type:"success"}):e.$message({showClose:!0,message:"发布失败",type:"error"}),s.btn.pushmsgVisable=!1})},dotask:function(){var e=this;this.timeDet<4?this.$message({showClose:!0,message:"间隔时间不能太短",type:"error"}):setInterval(function(){var s=e;e.$api.game.sendSysMsg(e.requestParam).then(function(t){!0===t.data.success?(e.$message({showClose:!0,message:"发布成功!",type:"success"}),s.btn.sh_pushmsgDisabled=!0):e.$message({showClose:!0,message:"发布失败",type:"error"})})},1e3*this.timeDet)}},beforeDestroy:function(){clearInterval(this.timer)}},i={render:function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("div",{staticClass:"allPage"},[t("div",{staticClass:"core_container"},[t("div",{staticClass:"form_container"},[t("el-form",{staticClass:"demo-form-inline form_container_header",attrs:{inline:!0,model:e.requestParam,size:"mini"}},[t("el-form-item",{staticStyle:{width:"80%"},attrs:{label:"内容",required:!0}},[t("el-input",{staticClass:"inputstyle",attrs:{type:"textarea",autosize:{minRows:5,maxRows:20},maxlength:200,"show-word-limit":!0,clearable:!0},model:{value:e.requestParam.msg,callback:function(s){e.$set(e.requestParam,"msg",s)},expression:"requestParam.msg"}})],1),e._v(" "),t("el-form-item",{staticStyle:{width:"80%"},attrs:{label:"间隔(s)"}},[t("el-input",{attrs:{placeholder:"测试专用"},model:{value:e.timeDet,callback:function(s){e.timeDet=s},expression:"timeDet"}})],1),e._v(" "),t("el-form-item",{staticStyle:{width:"80%"},attrs:{label:"操作"}},[t("el-button",{attrs:{type:"primary",size:"small",disabled:e.btn.pushmsgVisable},on:{click:e.submit}},[e._v("发布")]),e._v(" "),t("el-button",{attrs:{type:"primary",size:"small",disabled:e.btn.sh_pushmsgDisabled},on:{click:e.dotask}},[e._v("定时发布")])],1)],1)],1)])])},staticRenderFns:[]};var r=t("VU/8")(a,i,!1,function(e){t("scDQ")},"data-v-6b4191a0",null);s.default=r.exports},scDQ:function(e,s){}});