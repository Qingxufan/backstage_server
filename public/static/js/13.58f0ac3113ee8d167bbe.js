webpackJsonp([13],{"G8V/":function(e,a){},Xsvk:function(e,a,t){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var i={computed:{},data:function(){return{labelPosition:"right",responseData:[],page:{list:[],current_page:1,total:0,page_size:8},showTab:!1,action:{type:"",title:""},config:{boss_id:"",app_id:"",channel_code:"",account_config:{},app_version:{},lobby_version:{},app_link:"",game_link:"",lobby_link:"",goods_ids:[],area_code_arr:[],hide_node_arr:[],official_info:"",reg_config:{},app_state:{}},arraystr:{goods_ids:"",area_code_arr:"",hide_node_arr:""},dialogFormVisible:!1,formLabelWidth:"18%"}},methods:{Search:function(){var e=this,a=this;a.responseData=[],this.$api.app.configList(this.requestParam).then(function(t){if(!0===t.data.success){a.responseData=t.data.data.list,a.page.total=a.responseData.length;var i=(a.page.current_page-1)*a.page.page_size,o=a.page.total>a.page.current_page*a.page.page_size?a.page.current_page*a.page.page_size:a.responseData.length;a.page.list=a.responseData.slice(i,o),a.page.list.map(function(e){return e.account_config=e.account_config||{gold:0,jyb:0},e.app_version=e.app_version||{max:0,min:0},e.lobby_version=e.lobby_version||{max:0,min:0},e.goods_ids=e.goods_ids||[],e.area_code_arr=e.area_code_arr||[],e.hide_node_arr=e.hide_node_arr||[],e.reg_config=e.reg_config||{device:"",mobile:""},e.app_state=e.app_state||{info:"",code:""},e})}else e.$message({showClose:!0,message:"获取渠道配置列表失败",type:"error"})})},resetForm:function(){this.config={boss_id:"",app_id:"",channel_code:"",account_config:{},app_version:{},lobby_version:{},app_link:"",game_link:"",lobby_link:"",goods_ids:[],area_code_arr:[],hide_node_arr:[],official_info:"",reg_config:{},app_state:{}},this.arraystr.goods_ids="",this.arraystr.area_code_arr="",this.arraystr.hide_node_arr=""},tableRowClassName:function(e){e.row;var a=e.rowIndex;return a%4==1?"warning-row":a%4==3?"success-row":""},handleEdit:function(e){this.action.type="edit",this.action.title="配置修改",this.config=this.page.list[e],this.config.reg_config={device:"",mobile:""},this.config.app_state={code:"",info:""}},doCommit:function(){var e=this,a=this;"edit"==this.action.type?(a.config.goods_ids=a.arraystr.goods_ids.replace(/\s/g,"").replace(/，/g,",").split(","),a.config.area_code_arr=a.arraystr.area_code_arr.replace(/\s/g,"").replace(/，/g,",").split(","),a.config.hide_node_arr=a.arraystr.hide_node_arr.replace(/\s/g,"").replace(/，/g,",").split(","),this.$api.app.updateChannelConfig(this.config).then(function(t){!0===t.data.success?(e.$message({showClose:!0,message:"修改成功！",type:"success"}),a.dialogFormVisible=!1,a.resetForm(),a.Search()):e.$message({showClose:!0,message:"修改失败",type:"error"})})):"add"==this.action.type&&(this.$api.app.addChannelConfig({app_id:this.config.app_id,boss_id:this.config.boss_id,channel_code:this.config.channel_code}).then(function(t){!0===t.data.success?(e.$message({showClose:!0,message:"新增成功！",type:"success"}),a.dialogFormVisible=!1,a.resetForm(),a.Search()):e.$message({showClose:!0,message:"新增失败",type:"error"})}),a.Search())},addConfig:function(){this.dialogFormVisible=!0,this.action.type="add",this.action.title="新增配置",this.resetForm()},chenge:function(e){this.$forceUpdate()},prePage:function(){this.page.current_page>0&&(this.page.current_page--,this.page.list=this.responseData.slice((this.page.current_page-1)*this.page.page_size,this.responseData.length>this.page.current_page*this.page.page_size?this.page.current_page*this.page.page_size:this.responseData.length))},thisPage:function(e){this.page.current_page=e,this.page.list=this.responseData.slice((this.page.current_page-1)*this.page.page_size,this.responseData.length>this.page.current_page*this.page.page_size?this.page.current_page*this.page.page_size:this.responseData.length)},nextPage:function(){this.page.current_page<Math.ceil(this.page.total/this.page.page_size)&&(this.page.current_page++,this.page.list=this.responseData.slice((this.page.current_page-1)*this.page.page_size,this.responseData.length>this.page.current_page*this.page.page_size?this.page.current_page*this.page.page_size:this.responseData.length))}},mounted:function(){this.Search()}},o={render:function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("div",{staticClass:"allPage"},[t("div",{staticClass:"core_container"},[t("div",{staticClass:"showDataTab"},[[t("br"),e._v(" "),t("el-button",{attrs:{type:"success",size:"mini"},on:{click:e.addConfig}},[e._v("新增")])],e._v(" "),t("el-table",{staticStyle:{width:"100%","margin-top":"5px"},attrs:{data:e.page.list,"row-class-name":e.tableRowClassName}},[t("el-table-column",{attrs:{prop:"app_id",label:"AppId",width:"90%"}}),e._v(" "),t("el-table-column",{attrs:{prop:"boss_id",label:"BossId",width:"90%"}}),e._v(" "),t("el-table-column",{attrs:{prop:"channel_code",label:"渠道码",width:"90%"}}),e._v(" "),t("el-table-column",{attrs:{prop:"account_config.gold",label:"初始金币",width:"90%"}}),e._v(" "),t("el-table-column",{attrs:{prop:"app_version",label:"App版本配置"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("span",[e._v("上限："+e._s(a.row.app_version?a.row.app_version.max:""))]),t("br"),e._v(" "),t("span",[e._v("下限："+e._s(a.row.app_version?a.row.app_version.min:""))])]}}])}),e._v(" "),t("el-table-column",{attrs:{prop:"lobby_version",label:"大厅版本配置"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("span",[e._v("上限："+e._s(a.row.lobby_version?a.row.lobby_version.max:""))]),t("br"),e._v(" "),t("span",[e._v("下限："+e._s(a.row.lobby_version?a.row.lobby_version.min:""))])]}}])}),e._v(" "),t("el-table-column",{attrs:{prop:"app_link",label:"App下载地址"}}),e._v(" "),t("el-table-column",{attrs:{prop:"game_link",label:"子游戏下载地址"}}),e._v(" "),t("el-table-column",{attrs:{prop:"lobby_link",label:"大厅资源下载地址"}}),e._v(" "),t("el-table-column",{attrs:{prop:"goods_ids",label:"商品编号列表"}}),e._v(" "),t("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(t){e.handleEdit(a.$index),e.dialogFormVisible=!0}}},[e._v("编辑")])]}}])})],1),e._v(" "),[t("el-dialog",{attrs:{title:e.action.title,visible:e.dialogFormVisible,"show-close:true":""},on:{"update:visible":function(a){e.dialogFormVisible=a}}},[t("el-form",{ref:"config",attrs:{model:e.config}},[t("el-form-item",{attrs:{label:"AppId","label-width":e.formLabelWidth,prop:"app_id",required:!0}},[t("el-input",{staticClass:"dialog_input",attrs:{disabled:"edit"==e.action.type},model:{value:e.config.app_id,callback:function(a){e.$set(e.config,"app_id",a)},expression:"config.app_id"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"BossId","label-width":e.formLabelWidth,prop:"boss_id",required:!0}},[t("el-input",{staticClass:"dialog_input",attrs:{disabled:"edit"==e.action.type},model:{value:e.config.boss_id,callback:function(a){e.$set(e.config,"boss_id",a)},expression:"config.boss_id"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"渠道码","label-width":e.formLabelWidth,prop:"channel_code",required:!0}},[t("el-input",{staticClass:"dialog_input",model:{value:e.config.channel_code,callback:function(a){e.$set(e.config,"channel_code",a)},expression:"config.channel_code"}})],1),e._v(" "),t("el-form-item",{directives:[{name:"show",rawName:"v-show",value:"edit"==e.action.type,expression:"action.type == 'edit'"}],attrs:{label:"初始金币","label-width":e.formLabelWidth,prop:"gold"}},[t("el-input",{staticClass:"dialog_input",on:{input:function(a){return e.chenge(a)}},model:{value:e.config.account_config.gold,callback:function(a){e.$set(e.config.account_config,"gold",a)},expression:"config.account_config.gold"}})],1),e._v(" "),t("el-form-item",{directives:[{name:"show",rawName:"v-show",value:"edit"==e.action.type,expression:"action.type == 'edit'"}],attrs:{label:"App版本配置","label-width":e.formLabelWidth,prop:"app_version"}},[e._v("\n              (高)\n              "),t("el-input",{staticClass:"dialog_input_small",on:{input:function(a){return e.chenge(a)}},model:{value:e.config.app_version.max,callback:function(a){e.$set(e.config.app_version,"max",a)},expression:"config.app_version.max"}}),e._v("-\n              "),t("el-input",{staticClass:"dialog_input_small",on:{input:function(a){return e.chenge(a)}},model:{value:e.config.app_version.min,callback:function(a){e.$set(e.config.app_version,"min",a)},expression:"config.app_version.min"}}),e._v("(低)\n            ")],1),e._v(" "),t("el-form-item",{directives:[{name:"show",rawName:"v-show",value:"edit"==e.action.type,expression:"action.type == 'edit'"}],attrs:{label:"大厅版本配置","label-width":e.formLabelWidth,prop:"lobby_version"}},[e._v("\n              (高)"),t("el-input",{staticClass:"dialog_input_small",on:{input:function(a){return e.chenge(a)}},model:{value:e.config.lobby_version.max,callback:function(a){e.$set(e.config.lobby_version,"max",a)},expression:"config.lobby_version.max"}}),e._v("\n              -\n              "),t("el-input",{staticClass:"dialog_input_small",on:{input:function(a){return e.chenge(a)}},model:{value:e.config.lobby_version.min,callback:function(a){e.$set(e.config.lobby_version,"min",a)},expression:"config.lobby_version.min"}}),e._v("\n              (低)\n            ")],1),e._v(" "),t("el-form-item",{directives:[{name:"show",rawName:"v-show",value:"edit"==e.action.type,expression:"action.type == 'edit'"}],attrs:{label:"App下载地址","label-width":e.formLabelWidth,prop:"app_link"}},[t("el-input",{staticClass:"dialog_input",model:{value:e.config.app_link,callback:function(a){e.$set(e.config,"app_link",a)},expression:"config.app_link"}})],1),e._v(" "),t("el-form-item",{directives:[{name:"show",rawName:"v-show",value:"edit"==e.action.type,expression:"action.type == 'edit'"}],attrs:{label:"子游戏下载地址","label-width":e.formLabelWidth,prop:"game_link"}},[t("el-input",{staticClass:"dialog_input",model:{value:e.config.game_link,callback:function(a){e.$set(e.config,"game_link",a)},expression:"config.game_link"}})],1),e._v(" "),t("el-form-item",{directives:[{name:"show",rawName:"v-show",value:"edit"==e.action.type,expression:"action.type == 'edit'"}],attrs:{label:"大厅资源下载地址","label-width":e.formLabelWidth,prop:"lobby_link"}},[t("el-input",{staticClass:"dialog_input",model:{value:e.config.lobby_link,callback:function(a){e.$set(e.config,"lobby_link",a)},expression:"config.lobby_link"}})],1),e._v(" "),t("el-form-item",{directives:[{name:"show",rawName:"v-show",value:"edit"==e.action.type,expression:"action.type == 'edit'"}],attrs:{label:"商品编号列表","label-width":e.formLabelWidth}},[t("el-input",{staticClass:"dialog_input",attrs:{type:"textarea",rows:2,placeholder:"用逗号隔开，比如：123,457,457"},model:{value:e.arraystr.goods_ids,callback:function(a){e.$set(e.arraystr,"goods_ids",a)},expression:"arraystr.goods_ids"}})],1),e._v(" "),t("el-form-item",{directives:[{name:"show",rawName:"v-show",value:"edit"==e.action.type,expression:"action.type == 'edit'"}],attrs:{label:"支持区号列表","label-width":e.formLabelWidth}},[t("el-input",{staticClass:"dialog_input",attrs:{type:"textarea",rows:2,placeholder:"用逗号隔开，比如：123,457,457"},model:{value:e.arraystr.area_code_arr,callback:function(a){e.$set(e.arraystr,"area_code_arr",a)},expression:"arraystr.area_code_arr"}})],1),e._v(" "),t("el-form-item",{directives:[{name:"show",rawName:"v-show",value:"edit"==e.action.type,expression:"action.type == 'edit'"}],attrs:{label:"隐藏大厅列表","label-width":e.formLabelWidth}},[t("el-input",{staticClass:"dialog_input",attrs:{type:"textarea",rows:2,placeholder:"用逗号隔开，比如：123,457,457","auto-complete":"false"},model:{value:e.arraystr.hide_node_arr,callback:function(a){e.$set(e.arraystr,"hide_node_arr",a)},expression:"arraystr.hide_node_arr"}})],1),e._v(" "),t("el-form-item",{directives:[{name:"show",rawName:"v-show",value:"edit"==e.action.type,expression:"action.type == 'edit'"}],attrs:{label:"官方信息","label-width":e.formLabelWidth}},[t("el-input",{staticClass:"dialog_input",attrs:{type:"textarea",rows:2,"auto-complete":"false"},model:{value:e.config.official_info,callback:function(a){e.$set(e.config,"official_info",a)},expression:"config.official_info"}})],1),e._v(" "),t("el-form-item",{directives:[{name:"show",rawName:"v-show",value:"edit"==e.action.type,expression:"action.type == 'edit'"}],attrs:{label:"注册配置","label-width":e.formLabelWidth},on:{input:function(a){return e.chenge(a)}}},[e._v("\n              device:"),t("el-input",{staticClass:"dialog_input_small",attrs:{"auto-complete":"false"},on:{input:function(a){return e.chenge(a)}},model:{value:e.config.reg_config.device,callback:function(a){e.$set(e.config.reg_config,"device",a)},expression:"config.reg_config.device"}}),e._v("\n              手机:"),t("el-input",{staticClass:"dialog_input_small",attrs:{"auto-complete":"false"},on:{input:function(a){return e.chenge(a)}},model:{value:e.config.reg_config.mobile,callback:function(a){e.$set(e.config.reg_config,"mobile",a)},expression:"config.reg_config.mobile"}})],1),e._v(" "),t("el-form-item",{directives:[{name:"show",rawName:"v-show",value:"edit"==e.action.type,expression:"action.type == 'edit'"}],attrs:{label:"App状态",prop:"app_state","label-width":e.formLabelWidth}},[e._v("\n              状态码:\n              "),t("el-input",{staticClass:"dialog_input_small",attrs:{"auto-complete":"false"},on:{input:function(a){return e.chenge(a)}},model:{value:e.config.app_state.code,callback:function(a){e.$set(e.config.app_state,"code",e._n(a))},expression:"config.app_state.code"}}),e._v("\n              状态说明:\n              "),t("el-input",{staticClass:"dialog_input_small",attrs:{"auto-complete":"false"},on:{input:function(a){return e.chenge(a)}},model:{value:e.config.app_state.info,callback:function(a){e.$set(e.config.app_state,"info",a)},expression:"config.app_state.info"}})],1),e._v(" "),t("el-form-item",[t("el-button",{staticStyle:{"margin-left":"18%"},on:{click:function(a){e.dialogFormVisible=!1,e.resetForm("config")}}},[e._v("取 消")]),e._v(" "),t("el-button",{attrs:{type:"primary"},on:{click:e.doCommit}},[e._v("确 定")])],1)],1)],1)]],2),e._v(" "),t("div",{staticClass:"pageBar"},[t("el-pagination",{attrs:{background:"","hide-on-single-page":"",layout:"prev, pager, next","current-page":e.page.current_page,"page-size":e.page.page_size,total:e.page.total},on:{"next-click":e.nextPage,"current-change":e.thisPage,"prev-click":e.prePage}})],1)])])},staticRenderFns:[]};var s=t("VU/8")(i,o,!1,function(e){t("G8V/")},"data-v-649a4d96",null);a.default=s.exports}});